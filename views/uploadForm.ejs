<%include ./partials/head%>
<%include ./partials/navBar%>

<div id="appBody" class="container">
    <%if(successMessage.length){%>
    <div class="alert alert-success alert-dismissible fade show mt-5" role="alert">
        <strong>Great!</strong> <%=successMessage%>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <%}else if(errorMessage.length){%>
    <div class="alert alert-danger alert-dismissible fade show mt-5" role="alert">
        <strong>Sorry!</strong> <%=errorMessage%>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <% }%>
    <form method="POST" action="/upload" enctype="multipart/form-data">
        <div class="row mt-3">
            <div class="col">
                <input name="title" type="text" class="form-control" placeholder="Title">
            </div>
            <div class="col">
                <input name="authors" type="text" class="form-control" placeholder="Authors separated by comma">
            </div>
            <div class="col">
                <input name="price" type="text" class="form-control" placeholder="Price">
            </div>
        </div>
        <div class="input-group mt-5">
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="inputGroupFile04"
                    aria-describedby="inputGroupFileAddon04" name="bookCover">
                <label id="mLab" class="custom-file-label" for="inputGroupFile04">
                    Cover Image
                </label>
            </div>
        </div>
        <div class="input-group mt-5">
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="inputGroupFile06"
                    aria-describedby="inputGroupFileAddon06" name="content">
                <label id="mLab3" class="custom-file-label" for="inputGroupFile06">
                    Book content
                </label>
            </div>
        </div>
        <div class="input-group mb-3 mt-3">
            <div class="input-group-prepend">
                <label class="input-group-text" for="inputGroupSelect01">Category</label>
            </div>
            <select name="category" class="custom-select" id="inputGroupSelect01">
                <option selected>Choose...</option>
                <option value="scify">scify</option>
                <option value="romance">romance</option>
                <option value="comedy">comedy</option>
            </select>
        </div>
        <div class="input-group mt-2">
            <div class="input-group-prepend">
                <span class="input-group-text">Book Summary</span>
            </div>
            <textarea name="bookSummary" class="form-control" aria-label="With textarea"></textarea>
        </div>
        <div class="d-flex justify-content-center">
            <button class="btn btn-dark mt-5" type="submit">Upload</button>

        </div>
    </form>
</div>

<script>
    function changeInputContent(theInputId, theLabelId) {
        const theInput = document.querySelector(`#${theInputId}`)
        theInput.onchange = function (ev) {
            const fileName = theInput.value.split("\\").pop()
            document.querySelector(`#${theLabelId}`).innerText = fileName
        }
    }

    changeInputContent("inputGroupFile04", "mLab")
    changeInputContent("inputGroupFile06", "mLab3")


</script>

<%include ./partials/feet%>